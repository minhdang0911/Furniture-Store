@model List<Mood.EF2.Category>
@using BaiTapLon.Common;
@{ 
    var listMoiNhat = (List<Mood.EF2.Sanpham>)ViewBag.Sanphamnew;
    var listYeuThich = (List<Mood.EF2.Sanpham>)ViewBag.topHot;
    var listAllProduct = (List<Mood.EF2.Sanpham>)ViewBag.getAllProduct;
    var session = (UserLogin)Session[Constant.USER_SESSION];

}
<div class="border-bottom py-3 py-md-0">
    <div class="container">
        <div class="d-md-flex position-relative">
            <!--Cart and login button Mobile-->
            <div class="offcanvas-toggler align-self-center mr-md-5 d-xl-none d-flex d-md-block">
                <a id="sidebarNavToggler2" href="javascript:;" role="button" class="cat-menu text-dark"
                   aria-controls="sidebarContent2"
                   aria-haspopup="true"
                   aria-expanded="false"
                   data-unfold-event="click"
                   data-unfold-hide-on-scroll="false"
                   data-unfold-target="#sidebarContent2"
                   data-unfold-type="css-animation"
                   data-unfold-overlay='{
                                "className": "u-sidebar-bg-overlay",
                                "background": "rgba(0, 0, 0, .7)",
                                "animationSpeed": 100
                            }'
                   data-unfold-animation-in="fadeInLeft"
                   data-unfold-animation-out="fadeOutLeft"
                   data-unfold-duration="100">
                    <svg width="20px" height="18px">
                        <path fill-rule="evenodd" fill="rgb(0, 0, 0)" d="M-0.000,-0.000 L20.000,-0.000 L20.000,2.000 L-0.000,2.000 L-0.000,-0.000 Z" />
                        <path fill-rule="evenodd" fill="rgb(0, 0, 0)" d="M-0.000,8.000 L15.000,8.000 L15.000,10.000 L-0.000,10.000 L-0.000,8.000 Z" />
                        <path fill-rule="evenodd" fill="rgb(0, 0, 0)" d="M-0.000,16.000 L20.000,16.000 L20.000,18.000 L-0.000,18.000 L-0.000,16.000 Z" />
                    </svg>
                    <span class="ml-3">Danh Mục Sách</span>
                </a>

                <ul class="nav d-md-none ml-auto">
                    <li class="nav-item"><a href="#" class="nav-link text-dark"><i class="glph-icon flaticon-heart"></i></a></li>
                    @if (session == null)
                    {
                        <li class="nav-item">
                            <!-- Account Sidebar Toggle Button - Mobile -->
                            <a id="sidebarNavToggler9" href="javascript:;" role="button" class="px-2 nav-link h-primary"
                               aria-controls="sidebarContent9"
                               aria-haspopup="true"
                               aria-expanded="false"
                               data-unfold-event="click"
                               data-unfold-hide-on-scroll="false"
                               data-unfold-target="#sidebarContent9"
                               data-unfold-type="css-animation"
                               data-unfold-overlay='{
                                            "className": "u-sidebar-bg-overlay",
                                            "background": "rgba(0, 0, 0, .7)",
                                            "animationSpeed": 500
                                        }'
                               data-unfold-animation-in="fadeInRight"
                               data-unfold-animation-out="fadeOutRight"
                               data-unfold-duration="500">
                                <i class="glph-icon flaticon-user"></i>
                            </a>
                            <!-- End Account Sidebar Toggle Button - Mobile -->
                        </li>
                    }
                    else
                    {
                        <li class="nav-item"><a href="/tong-quan-@session.userId" class="nav-link text-dark"><i class="glph-icon flaticon-user"></i></a></li>
                    }
                    <li class="nav-item">
                        <!-- Cart Sidebar Toggle Button -->
                        <a id="sidebarNavToggler3" href="javascript:;" role="button" class="nav-link pr-0 text-dark position-relative"
                           aria-controls="sidebarContent3"
                           aria-haspopup="true"
                           aria-expanded="false"
                           data-unfold-event="click"
                           data-unfold-hide-on-scroll="false"
                           data-unfold-target="#sidebarContent3"
                           data-unfold-type="css-animation"
                           data-unfold-overlay='{
                                        "className": "u-sidebar-bg-overlay",
                                        "background": "rgba(0, 0, 0, .7)",
                                        "animationSpeed": 500
                                    }'
                           data-unfold-animation-in="fadeInRight"
                           data-unfold-animation-out="fadeOutRight"
                           data-unfold-duration="500">
                            <span class="ml-1 position-absolute bg-dark width-16 height-16 rounded-circle d-flex align-items-center justify-content-center text-white font-size-n9 left-0">@ViewBag.CartList</span>
                            <i class="glph-icon flaticon-icon-126515"></i>

                        </a>
                        <!-- End Cart Sidebar Toggle Button -->
                    </li>
                </ul>
            </div>
            <!--Cart and login button Mobile-->


            <!-- Basics Accordion -->
            <div id="basicsAccordion" class="mr-5 d-none d-xl-block">
                <!-- Card -->
                <div class="position-relative">
                    <div class="bg-primary py-3 px-5 card-collapse" id="basicsHeadingOne">
                        <button type="button" class="btn btn-link btn-block p-0 d-flex align-items-center card-btn"
                                data-toggle="collapse"
                                data-target="#basicsCollapseOne"
                                aria-expanded="true"
                                aria-controls="basicsCollapseOne">
                            <svg width="20px" height="18px">
                                <path fill-rule="evenodd" fill="rgb(255, 255, 255)" d="M-0.000,-0.000 L20.000,-0.000 L20.000,2.000 L-0.000,2.000 L-0.000,-0.000 Z" />
                                <path fill-rule="evenodd" fill="rgb(255, 255, 255)" d="M-0.000,8.000 L15.000,8.000 L15.000,10.000 L-0.000,10.000 L-0.000,8.000 Z" />
                                <path fill-rule="evenodd" fill="rgb(255, 255, 255)" d="M-0.000,16.000 L20.000,16.000 L20.000,18.000 L-0.000,18.000 L-0.000,16.000 Z" />
                            </svg>
                            <span class="ml-3 text-white">Danh Mục Sách</span>
                            <i class="fas fa-chevron-down ml-5 text-white font-size-2"></i>
                        </button>
                    </div>
                    <div id="basicsCollapseOne" class="z-index-2 collapse position-absolute right-0 left-0 border"
                         aria-labelledby="basicsHeadingOne"
                         data-parent="#basicsAccordion">
                        <div class="card-body p-0">
                            <ul class="list-unstyled vertical-menu position-relative mb-0 bg-white">
                                <!--li 1-->
                                <li>
                                    <a id="basicDropdownHoverInvoker" class="text-dark dropdown-nav-link dropdown-toggle d-flex align-items-center border-bottom" href="javascript:;" role="button"
                                       aria-controls="basicDropdownHover"
                                       aria-haspopup="true"
                                       aria-expanded="false"
                                       data-unfold-event="hover"
                                       data-unfold-target="#basicDropdownHover"
                                       data-unfold-type="css-animation"
                                       data-unfold-duration="200"
                                       data-unfold-delay="50"
                                       data-unfold-hide-on-scroll="true"
                                       data-unfold-animation-in="fadeIn"
                                       data-unfold-animation-out="fadeOut">
                                        <div class="width-30 mr-2 text-lh-sm">
                                            <i class="fas fa-crown font-size-5"></i>
                                        </div>
                                        <div class="mr-auto">Sách Yêu Thích Nhất</div>
                                    </a>

                                    <div id="basicDropdownHover" class="px-5 py-3 dropdown-menu dropdown-unfold top-0 right-auto left-100 bottom-0 mt-0 rounded-0" style="width: 700px;" aria-labelledby="basicDropdownHoverInvoker">
                                        <div class="row">
                                            <div class="col-4">
                                                <ul class="menu list-unstyled">
                                                    <li><a href="#" class=" d-block link-black-100 py-3 font-size-3 font-weight-medium">Yêu Thích</a></li>
                                                    @foreach (var item in listYeuThich)
                                                    {
                                                        var url = "/chi-tiet/" + item.MetaTitle + "-" + item.IDContent;
                                                        <li><a href="@url" class=" d-block link-black-100 py-1">@item.Name</a></li>
                                                    }



                                                </ul>
                                            </div>
                                            <div class="col-4">
                                                <ul class="menu list-unstyled">
                                                    <li><a href="#" class=" d-block link-black-100 py-3 font-size-3 font-weight-medium">Tác giả</a></li>
                                                    @foreach (var item in listYeuThich)
                                                    {
                                                        var url = "/chi-tiet/" + item.MetaTitle + "-" + item.IDContent;
                                                        <li><a href="@url" class=" d-block link-black-100 py-1">@item.TacGia</a></li>
                                                    }
                                                    

                                                </ul>
                                            </div>
                                            @{var url1 = "/chi-tiet/" + listYeuThich[0].MetaTitle + "-" + listYeuThich[0].IDContent;}
                                            <div class="col-4 bg-gray-200">
                                                <div class="banner px-8 py-5">
                                                    <div class="banner__body">
                                                        <h3 class="banner_text m-0">
                                                            <span class="d-block mb-1 font-size-7 font-weight-regular">Sách </span>
                                                            <span class="d-block mb-2 font-size-10 text-primary font-weight-bold">Yêu Thích</span>
                                                        </h3>
                                                        <a href="@url1" class="d-block link-black-100 mb-6">Đặt Ngay</a>
                                                        <div class="banner__image">
                                                            <img src="@listYeuThich[0].Images" width="280" height="210" class="img-fluid" alt="image-description">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </li>

                                <!--li 2-->
                                <li>
                                    <a id="basicDropdownHoverInvoker1" class="text-dark dropdown-nav-link dropdown-toggle d-flex align-items-center border-bottom" href="javascript:;" role="button"
                                       aria-controls="basicDropdownHover1"
                                       aria-haspopup="true"
                                       aria-expanded="false"
                                       data-unfold-event="hover"
                                       data-unfold-target="#basicDropdownHover1"
                                       data-unfold-type="css-animation"
                                       data-unfold-duration="200"
                                       data-unfold-delay="50"
                                       data-unfold-hide-on-scroll="true"
                                       data-unfold-animation-in="fadeIn"
                                       data-unfold-animation-out="fadeOut">
                                        <div class="width-30 mr-2 text-lh-sm">
                                            <i class="fas fa-book-reader font-size-5"></i>
                                        </div>
                                        <div class="mr-auto">Sách Mới Nhất</div>
                                    </a>

                                    <div id="basicDropdownHover1" class="px-5 py-3 dropdown-menu dropdown-unfold top-0 right-auto left-100 bottom-0 mt-0 rounded-0" style="width: 700px;" aria-labelledby="basicDropdownHoverInvoker1">
                                        <div class="row">
                                            <div class="col-4">
                                                <ul class="menu list-unstyled">
                                                    <li><a href="#" class=" d-block link-black-100 py-3 font-size-3 font-weight-medium">Mới Nhất</a></li>
                                                    
                                                    @foreach (var item in listMoiNhat)
                                                    {
                                                        var url = "/chi-tiet/" + item.MetaTitle + "-" + item.IDContent;
                                                        <li><a href="@url" class=" d-block link-black-100 py-1">@item.Name</a></li>
                                                    }

                                                </ul>
                                            </div>
                                            <div class="col-4">
                                                <ul class="menu list-unstyled">
                                                    <li><a href="#" class=" d-block link-black-100 py-3 font-size-3 font-weight-medium">Tác Giả</a></li>
                                                    @foreach (var item in listMoiNhat)
                                                    {
                                                        var url = "/chi-tiet/" + item.MetaTitle + "-" + item.IDContent;
                                                        <li><a href="@url" class=" d-block link-black-100 py-1">@item.TacGia</a></li>
                                                    }

                                                </ul>
                                            </div>
                                            @{var url2 = "/chi-tiet/" + listMoiNhat[0].MetaTitle + "-" + listMoiNhat[0].IDContent;}
                                            <div class="col-4 bg-gray-200">
                                                <div class="banner px-8 py-5">
                                                    <div class="banner__body">
                                                        <h3 class="banner_text m-0">
                                                            <span class="d-block mb-1 font-size-7 font-weight-regular">Sách </span>
                                                            <span class="d-block mb-2 font-size-10 text-primary font-weight-bold">Mới Nhất</span>
                                                        </h3>
                                                        <a href="@url2" class="d-block link-black-100 mb-6">Đặt Ngay</a>
                                                        <div class="banner__image">
                                                            <img src="@listMoiNhat[0].Images" width="280" height="210" class="img-fluid" alt="image-description">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </li>


                                <!--li 3-->
                                @{ int tang = 2;}
                               @foreach (var item in Model)
                               {
                                   
                                   var idhtml = "basicDropdownHoverInvoker" + tang;
                                   var hover = "basicDropdownHover" + tang;
                                   var unfold = "#basicDropdownHover" + tang;
                                <li>
                                    <a id="@idhtml" class="text-dark dropdown-nav-link dropdown-toggle d-flex align-items-center border-bottom" href="javascript:;" role="button"
                                       aria-controls="@hover"
                                       aria-haspopup="true"
                                       aria-expanded="false"
                                       data-unfold-event="hover"
                                       data-unfold-target="@unfold"
                                       data-unfold-type="css-animation"
                                       data-unfold-duration="200"
                                       data-unfold-delay="50"
                                       data-unfold-hide-on-scroll="true"
                                       data-unfold-animation-in="fadeIn"
                                       data-unfold-animation-out="fadeOut">
                                        <div class="width-30 mr-2 text-lh-sm">
                                            @if (tang == 2)
                                            {
                                                <i class="fas fa-book-open font-size-5"></i>
                                            }
                                            else if (tang == 3)
                                            {
                                                <i class="fab fa-pagelines font-size-5"></i>
                                            }
                                            else if (tang == 4)
                                            {
                                                <i class="fas fa-microscope font-size-5"></i>
                                            }
                                            else if (tang == 5)
                                            {
                                                <i class="fas fa-user-secret font-size-5"></i>
                                            }
                                            else if (tang == 6)
                                            {
                                                <i class="fas fa-language font-size-5"></i>
                                            }
                                            else if (tang == 7)
                                            {
                                                <i class="fas fa-child font-size-5"></i>
                                            }
                                            else if (tang == 8)
                                            {
                                                <i class="fas fa-church font-size-5"></i>
                                            }
                                        </div>
                                        <div class="mr-auto">@item.TenTheloai</div>
                                    </a>

                                    <div id="@hover" class="px-5 py-3 dropdown-menu dropdown-unfold top-0 right-auto left-100 bottom-0 mt-0 rounded-0" style="width: 700px;" aria-labelledby="@idhtml">
                                        <div class="row">
                                            <div class="col-4">
                                                <ul class="menu list-unstyled">
                                                    <li><a href="#" class=" d-block link-black-100 py-3 font-size-3 font-weight-medium">Danh Mục</a></li>
                                                    @{ int pause = 1;}
                                                    @foreach (var inItem in listAllProduct)
                                                    {
                                                        var url = "/chi-tiet/" + inItem.MetaTitle + "-" + inItem.IDContent;
                                                        if (pause != 8)
                                                        {
                                                            if (inItem.CategoryID == item.IDCategory)
                                                            {
                                                                <li><a href="@url" class=" d-block link-black-100 py-1">@inItem.Name</a></li>
                                                                pause++;
                                                            }
                                                        }
                                                        else { break; }
                                                    }
                                                    
                                                    
                                                </ul>
                                            </div>
                                            <div class="col-4">
                                                <ul class="menu list-unstyled">
                                                    <li><a href="#" class=" d-block link-black-100 py-3 font-size-3 font-weight-medium">Tác Giả</a></li>
                                                    @{ int pause2 = 1;}
                                                    @foreach (var inItem in listAllProduct)
                                                    {
                                                        var url = "/chi-tiet/" + inItem.MetaTitle + "-" + inItem.IDContent;
                                                        if (pause2 != 8)
                                                        {
                                                            if (inItem.CategoryID == item.IDCategory)
                                                            {
                                                                <li><a href="@url" class=" d-block link-black-100 py-1">@inItem.TacGia</a></li>
                                                                pause2++;
                                                            }
                                                        }
                                                        else { break; }
                                                    }
                                                    

                                                </ul>
                                            </div>
                                            <div class="col-4 bg-gray-200">
                                                <div class="banner px-8 py-5">
                                                    <div class="banner__body">
                                                        <h3 class="banner_text m-0">
                                                            <span class="d-block mb-1 font-size-7 font-weight-regular">Sách </span>
                                                            <span class="d-block mb-2 font-size-10 text-primary font-weight-bold">@item.TenTheloai</span>
                                                        </h3>
                                                        @{ int pause3 = 1;}
                                                        @foreach (var inItem in listAllProduct)
                                                        {

                                                            if (pause3 != 2)
                                                            {
                                                                if (item.IDCategory == inItem.CategoryID)
                                                                {
                                                                    var url = "/chi-tiet/" + inItem.MetaTitle + "-" + inItem.IDContent;
                                                                    <a href="@url" class="d-block link-black-100 mb-6">Đặt Ngay</a>
                                                                    <div class="banner__image">
                                                                        <img src="@inItem.Images" width="280" height="210" class="img-fluid" alt="image-description">
                                                                    </div>
                                                                    pause3++;
                                                                }
                                                            }
                                                        }
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                   { tang++; }
                               }


                            </ul>
                        </div>
                    </div>
                </div>
                <!-- End Card -->
            </div>
            <!-- End Basics Accordion -->

            @{Html.RenderAction("MainMenu", "Home");}
            @{ Html.RenderAction("TopMenu", "Home");}
        </div>
    </div>
</div>